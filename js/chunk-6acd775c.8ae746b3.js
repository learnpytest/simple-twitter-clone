(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6acd775c"],{"045d":function(t,e,s){},"09e4":function(t,e,s){"use strict";s("99af"),s("b0c0");e["a"]={generalErrorHandler:function(t){return function(e){t instanceof Error?e.$store.dispatch("ADD_NOTIFICATION",{type:"error",message:"".concat(t.name,": ").concat(t.message)}):e.$store.dispatch("ADD_NOTIFICATION",{type:"error",message:"".concat(t)})}}}},"133c":function(t,e,s){},1742:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[a("div",{staticClass:"user"},[a("div",{staticClass:"sidebar"},[a("Sidebar")],1),a("div",{staticClass:"main"},[a("div",{staticClass:"header"},[a("img",{attrs:{src:s("4ad7"),alt:""},on:{click:t.redirect}}),a("div",{staticClass:"header-info"},[a("p",[t._v(t._s(t.userObj.name))]),a("p",[t._v(t._s(t.userObj.TweetCount)+" "),a("span",[t._v("推文")])])])]),a("tabs-followship",{staticClass:"tabs"},[a("tab",{staticClass:"follow-tab",attrs:{title:"跟隨者"}},[a("UserFollowers",{attrs:{initialShowReplyModal:t.showReplyModal}})],1),a("tab",{staticClass:"follow-tab",attrs:{title:"正在跟隨"}},[a("UserFollowings",{attrs:{initialShowReplyModal:t.showReplyModal}})],1)],1)],1),a("div",{staticClass:"popular"},[a("Popular")],1)])])},r=[],n=s("5530"),i=s("1da1"),o=(s("96cf"),s("9a31")),c=s("c4cd"),l=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"follow-wrapper"},t._l(t.getCurrentUserFollowers,(function(e){return s("div",{key:e.followerId,staticClass:"follow-card"},[s("img",{attrs:{src:t._f("emptyImage")(e.avatar),alt:"user avatar"}}),s("div",{staticClass:"follow-card_info"},[s("p",{staticClass:"user-name"},[t._v(t._s(e.name))]),s("p",{staticClass:"user-info"},[t._v("@"+t._s(e.account))]),s("p",{staticClass:"user-intro"},[t._v(t._s(e.introduction))])]),e.isFollowed?s("div",{staticClass:"follow-btn"},[s("button",{staticClass:"following-btn",on:{click:function(s){return s.stopPropagation(),s.preventDefault(),t.cancel(e.followerId,e)}}},[t._v(" 正在跟隨 ")])]):s("div",{staticClass:"follow-btn"},[s("button",{staticClass:"follower-btn",on:{click:function(s){return s.stopPropagation(),s.preventDefault(),t.post(e.followerId,e)}}},[t._v(" 跟隨 ")])])])})),0)},u=[],d=s("5fad"),f=s("2f62"),p=s("ac0d"),v=s("6ad5"),h={name:"UserFollowers",mixins:[p["a"],p["e"]],data:function(){return{currentUser:{}}},created:function(){var t=this.$route.params.id;this.$store.dispatch(v["Y"],t),this.fetchCurrentUser()},methods:Object(n["a"])({fetchCurrentUser:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var s,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,d["a"].getCurrentUser();case 2:s=e.sent,a=s.data,t.currentUser=Object(n["a"])({},a);case 5:case"end":return e.stop()}}),e)})))()},cancel:function(t,e){var s=this.$route.params.id;this.cancelFollow({followingId:t,userId:s}),this.socketSendCommunityOneNotification("4",this.currentUser,e)},post:function(t,e){var s=this.$route.params.id;this.postFollowship({followingId:t,userId:s}),this.socketSendCommunityOneNotification("3",this.currentUser,e)}},Object(f["b"])({postFollowship:v["J"],cancelFollow:v["h"]})),computed:Object(n["a"])({},Object(f["c"])({getCurrentUserFollowers:v["r"]}))},m=h,b=(s("387c"),s("2877")),w=Object(b["a"])(m,l,u,!1,null,"00f05b27",null),_=w.exports,g=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"follow-wrapper"},t._l(t.getCurrentUserFollowings,(function(e){return s("div",{key:e.followingId,staticClass:"follow-card"},[s("img",{attrs:{src:t._f("emptyImage")(e.avatar),alt:"user avatar"}}),s("div",{staticClass:"follow-card_info"},[s("p",{staticClass:"user-name"},[t._v(t._s(e.name))]),s("p",{staticClass:"user-info"},[t._v("@"+t._s(e.account))]),s("p",{staticClass:"user-intro"},[t._v(t._s(e.introduction))])]),e.isFollowed?s("div",{staticClass:"follow-btn"},[s("button",{staticClass:"following-btn",on:{click:function(s){return s.stopPropagation(),s.preventDefault(),t.cancel(e.followingId,e)}}},[t._v(" 正在跟隨 ")])]):s("div",{staticClass:"follow-btn"},[s("button",{staticClass:"follower-btn",on:{click:function(s){return s.stopPropagation(),s.preventDefault(),t.post(e.followingId,e)}}},[t._v(" 跟隨 ")])])])})),0)},C=[],U={name:"UserFollowings",mixins:[p["a"],p["e"]],created:function(){var t=this.$route.params.id;this.$store.dispatch(v["Z"],t),this.fetchCurrentUser()},data:function(){return{currentUser:{}}},methods:Object(n["a"])({fetchCurrentUser:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var s,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,d["a"].getCurrentUser();case 2:s=e.sent,a=s.data,t.currentUser=Object(n["a"])({},a);case 5:case"end":return e.stop()}}),e)})))()},cancel:function(t,e){var s=this.$route.params.id;this.cancelFollow({followingId:t,userId:s}),this.socketSendCommunityOneNotification("4",this.currentUser,e)},post:function(t,e){var s=this.$route.params.id;this.postFollowship({followingId:t,userId:s}),this.socketSendCommunityOneNotification("3",this.currentUser,e)}},Object(f["b"])({cancelFollow:v["h"],postFollowship:v["J"]})),computed:Object(n["a"])({},Object(f["c"])({getCurrentUserFollowings:v["s"]}))},A=U,O=(s("271c"),Object(b["a"])(A,g,C,!1,null,"2393be2a",null)),I=O.exports,k=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("ul",{staticClass:"tabs__header"},t._l(t.tabs,(function(e,a){return s("li",{key:e.title,class:{tab__selected:a==t.selectedIndex},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.selectTab(a)}}},[t._v(" "+t._s(e.title)+" ")])})),0),t._t("default")],2)},x=[],T=(s("d3b7"),s("159b"),{data:function(){return{selectedIndex:0,tabs:[],filterType:{}}},created:function(){this.tabs=this.$children},mounted:function(){this.selectTab(0)},methods:{selectTab:function(t){this.selectedIndex=t,this.tabs.forEach((function(e,s){e.isActive=s===t}));var e=this.$route.params.id;0===this.selectedIndex?this.$router.push("/users/".concat(e,"/followers")):this.$router.push("/users/".concat(e,"/followings"))}}}),E=T,j=(s("7112"),Object(b["a"])(E,k,x,!1,null,"144e9c92",null)),S=j.exports,y=s("ad5e"),M=s("5e4c"),N={components:{Popular:o["a"],Sidebar:c["a"],UserFollowings:I,UserFollowers:_,TabsFollowship:S,Tab:y["a"]},data:function(){return{showEditModal:!1,showReplyModal:!1,userId:"",userObj:{}}},created:function(){this.userId=this.$route.params.id,this.fetchUser(this.userId)},methods:{redirect:function(){this.$router.push("/usermain")},fetchUser:function(t){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function s(){var a,r,i;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.prev=0,e.isLoading=!0,s.next=4,M["a"].getUser(t);case 4:if(a=s.sent,r=a.data,i=a.statusText,"OK"===i){s.next=8;break}throw new Error(i);case 8:e.userObj=Object(n["a"])({},r),e.isLoading=!1,s.next=16;break;case 12:s.prev=12,s.t0=s["catch"](0),e.isLoading=!1,console.log(s.t0);case 16:case"end":return s.stop()}}),s,null,[[0,12]])})))()},editModalToggle:function(){this.showEditModal?this.showEditModal=!1:this.showEditModal=!0}},computed:Object(n["a"])({},Object(f["c"])({getCurrentUser:v["q"]})),beforeRouteUpdate:function(t,e,s){this.$store.dispatch("SET_CURRENT_USER_FOLLOWINGS"),s()}},F=N,R=(s("e291"),Object(b["a"])(F,a,r,!1,null,"0ed56ead",null));e["default"]=R.exports},"271c":function(t,e,s){"use strict";s("b0de")},"387c":function(t,e,s){"use strict";s("9c3b")},"3a08":function(t,e,s){},"4ad7":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAACTSURBVHgB7dZBCsJAEETRwhN4w9TN5wjxBppBF6IGlQnp7vAfFGQVqmdVEgAAOJZpybykPb5L6YWvT5lVyGv5nqYiPpXvsQqgfBTKR6F8FMpHWSu/V5oGN1WTQor/tKlO+u6seBcNsOJf3xrklZ9PKsTiiBwsjsjB4ogcLI7Iwfpjw2RlvS/Jcqx78U02DAAAyOwG2DPi+W+Y9VUAAAAASUVORK5CYII="},7112:function(t,e,s){"use strict";s("045d")},"95ef":function(t,e,s){"use strict";s("b74c")},"99af":function(t,e,s){"use strict";var a=s("23e7"),r=s("da84"),n=s("d039"),i=s("e8b5"),o=s("861d"),c=s("7b0b"),l=s("07fa"),u=s("8418"),d=s("65f0"),f=s("1dde"),p=s("b622"),v=s("2d00"),h=p("isConcatSpreadable"),m=9007199254740991,b="Maximum allowed index exceeded",w=r.TypeError,_=v>=51||!n((function(){var t=[];return t[h]=!1,t.concat()[0]!==t})),g=f("concat"),C=function(t){if(!o(t))return!1;var e=t[h];return void 0!==e?!!e:i(t)},U=!_||!g;a({target:"Array",proto:!0,forced:U},{concat:function(t){var e,s,a,r,n,i=c(this),o=d(i,0),f=0;for(e=-1,a=arguments.length;e<a;e++)if(n=-1===e?i:arguments[e],C(n)){if(r=l(n),f+r>m)throw w(b);for(s=0;s<r;s++,f++)s in n&&u(o,f,n[s])}else{if(f>=m)throw w(b);u(o,f++,n)}return o.length=f,o}})},"9a31":function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"popular-wrapper"},[s("div",{staticClass:"popular-header"},[t._v("Popular")]),t._l(t.getTopUsers,(function(e){return s("div",{key:e.UserId,staticClass:"popular-card"},[s("img",{staticClass:"hoverStyle",attrs:{src:t._f("emptyImage")(e.avatar),alt:"user avatar"},on:{click:function(s){return s.stopPropagation(),s.preventDefault(),t.redirectToUser(e.UserId)}}}),s("div",{staticClass:"popular-card_info"},[s("p",{staticClass:"user-name"},[t._v(t._s(e.name))]),s("p",{staticClass:"user-info"},[t._v("@"+t._s(e.account))])]),e.isFollowed?s("div",{staticClass:"follow-btn"},[s("button",{staticClass:"following-btn",class:{disabled:t.currentUserId===e.UserId},attrs:{disabled:t.currentUserId===e.UserId},on:{click:function(s){return s.stopPropagation(),s.preventDefault(),t.cancel(e.UserId,e)}}},[t._v(" 正在跟隨 ")])]):s("div",{staticClass:"follow-btn"},[s("button",{staticClass:"follower-btn",class:{disabled:t.currentUserId===e.UserId},attrs:{disabled:t.currentUserId===e.UserId},on:{click:function(s){return s.stopPropagation(),s.preventDefault(),t.post(e.UserId,e)}}},[t._v(" 跟隨 ")])])])}))],2)},r=[],n=s("1da1"),i=s("5530"),o=(s("96cf"),s("2f62")),c=s("ac0d"),l=s("5fad"),u=s("6ad5"),d={name:"Popular",mixins:[c["a"],c["e"]],data:function(){return{currentUserId:"",currentUser:{}}},created:function(){this.setTopUsers(),this.getCurrentUser()},methods:Object(i["a"])(Object(i["a"])({cancel:function(t,e){var s=this.$route.params.id;this.cancelFollow({followingId:t,userId:s}),this.$emit("updateCancelView",t),this.socketSendCommunityOneNotification("4",this.currentUser,e)},post:function(t,e){var s=this.$route.params.id;this.postFollowship({followingId:t,userId:s}),this.$emit("updateFollowView",t),this.socketSendCommunityOneNotification("3",this.currentUser,e)}},Object(o["b"])({setTopUsers:u["ib"],postFollowship:u["J"],cancelFollow:u["h"]})),{},{getCurrentUser:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){var s,a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l["a"].getCurrentUser();case 3:if(s=e.sent,a=s.data,r=s.statusText,"OK"===r){e.next=7;break}throw new Error(r);case 7:t.currentUser=Object(i["a"])({},a),t.currentUserId=a.id,e.next=14;break;case 11:e.prev=11,e.t0=e["catch"](0),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})))()},redirectToUser:function(t){this.$router.push({name:"user",params:{id:t}})}}),computed:Object(i["a"])({},Object(o["c"])({getTopUsers:u["C"]}))},f=d,p=(s("95ef"),s("2877")),v=Object(p["a"])(f,a,r,!1,null,"4b1169b2",null);e["a"]=v.exports},"9c3b":function(t,e,s){},"9dd4":function(t,e,s){t.exports=s.p+"img/Logo_small.21c0a93a.svg"},a357:function(t,e,s){t.exports=s.p+"img/icon_chat.6e17a436.svg"},ad5e:function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{directives:[{name:"show",rawName:"v-show",value:t.isActive,expression:"isActive"}]},[t._t("default")],2)},r=[],n={props:{title:{type:String,default:"Tab"}},data:function(){return{isActive:!0}}},i=n,o=s("2877"),c=Object(o["a"])(i,a,r,!1,null,null,null);e["a"]=c.exports},b0de:function(t,e,s){},b74c:function(t,e,s){},bf0d:function(t,e,s){t.exports=s.p+"img/icon_cog.2ff65de4.svg"},c00e:function(t,e,s){t.exports=s.p+"img/btn_noti.d84f3623.svg"},c4cd:function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"sidebar-wrapper"},[a("ul",{staticClass:"nav-links"},[a("li",[a("router-link",{attrs:{to:"#"}},[a("img",{staticClass:"logo",attrs:{src:s("9dd4"),alt:""}})])],1),a("li",[a("router-link",{attrs:{to:{name:"UserMain"}}},[a("div",{staticClass:"nav-link"},[a("img",{staticClass:"filter-orange",attrs:{src:s("dffc"),alt:""}}),a("p",{staticClass:"nav-link_text"},[t._v("首頁")])])])],1),a("li",[a("router-link",{attrs:{to:{name:"user",params:{id:t.currentUserId}}}},[a("div",{staticClass:"nav-link"},[a("img",{staticClass:"filter-orange",attrs:{src:s("8f36"),alt:""}}),a("p",{staticClass:"nav-link_text"},[t._v("個人資料")])])])],1),a("li",[a("router-link",{attrs:{to:{name:"community"}}},[a("div",{staticClass:"nav-link community"},[a("span",{staticClass:"community__icon"},[a("img",{attrs:{src:s("c00e"),alt:""}}),t.notificationUnread.communityNotification?a("span",{staticClass:"community__notification"},[t._v(t._s(t.notificationUnread.communityNotification))]):t._e()]),a("p",{staticClass:"nav-link_text"},[t._v("通知")])])])],1),a("li",[a("router-link",{attrs:{to:{name:"public-room"}}},[a("div",{staticClass:"nav-link community"},[a("span",{staticClass:"community__icon"},[a("img",{staticClass:"filter-orange",attrs:{src:s("a357"),alt:""}}),t.notificationUnread.publicMessage?a("span",{staticClass:"community__notification"},[t._v(t._s(t.notificationUnread.publicMessage))]):t._e()]),a("p",{staticClass:"nav-link_text"},[t._v("公開聊天室")])])])],1),a("li",[a("router-link",{attrs:{to:{name:"private-room"}}},[a("div",{staticClass:"nav-link community"},[a("span",{staticClass:"community__icon"},[a("img",{staticClass:"filter-orange",attrs:{src:s("a357"),alt:""}}),t.sumUpOfUnreadPrivateMessages>0?a("span",{staticClass:"community__notification"},[t._v(t._s(t.sumUpOfUnreadPrivateMessages))]):t._e()]),a("p",{staticClass:"nav-link_text"},[t._v("私人訊息")])])])],1),a("li",[a("router-link",{attrs:{to:{name:"user-setting"}}},[a("div",{staticClass:"nav-link"},[a("img",{staticClass:"filter-orange",attrs:{src:s("bf0d"),alt:""}}),a("p",{staticClass:"nav-link_text"},[t._v("設定")])])])],1),a("li",{staticClass:"nav-link"},[a("button",{on:{click:t.handleShowModalClick}},[t._v("推文")])])]),a("div",{staticClass:"logout",on:{click:t.logout}},[a("router-link",{attrs:{to:"#"}},[a("div",{staticClass:"nav-link"},[a("img",{staticClass:"filter-orange",attrs:{src:s("f667"),alt:""}}),a("p",{staticClass:"nav-link_text"},[t._v("登出")])])])],1)])},r=[],n=s("5530"),i=s("1da1"),o=(s("96cf"),s("d3b7"),s("d81d"),s("25f0"),s("56d7")),c=s("2f62"),l=s("6ad5"),u=s("5fad"),d=s("ac0d"),f=s("09e4"),p={name:"Sidebar",mixins:[d["f"]],props:{initialShowModal:{type:Boolean,required:!0}},sockets:{displayUnreadNotification:function(t){this.$store.dispatch("SET_COMMUNITY_NOTIFICATION_UNREAD",t)},unreadNotificationPublicMessageAddOne:function(){this.$store.dispatch("INCREMENT_COMMUNITY_NOTIFICATION_UNREAD_PUBLIC_MESSAGE")},displayAllUnreadPrivateMessages:function(t){var e=t.map((function(t){return t.unread})).reduce((function(t,e){return t+e}),0);this.$store.dispatch("SET_SUM_OF_UNREAD_PRIVATE_MESSAGES",e)},allUnreadPrivateMessagesSumAddOne:function(){this.$store.dispatch("SET_SUM_OF_UNREAD_PRIVATE_MESSAGES",this.sumUpOfUnreadPrivateMessages+1)}},data:function(){return{showModal:"",currentUserId:"",sum:0}},created:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.getCurrentUser();case 3:return e.next=5,o["default"].emit("getUnreadNotification",t.currentUserId.toString());case 5:return e.next=7,o["default"].emit("getAllUnreadPrivateMessages",t.currentUserId);case 7:e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](0),f["a"].generalErrorHandler("無法取得資料，請稍後再試")(t);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))()},computed:Object(n["a"])({},Object(c["c"])({communityNotification:l["o"],notificationUnread:"GET_COMMUNITY_NOTIFICATION_UNREAD",sumUpOfUnreadPrivateMessages:"GET_SUM_OF_UNREAD_PRIVATE_MESSAGES"})),methods:Object(n["a"])(Object(n["a"])({},Object(c["b"])({revokeAuthentication:l["S"]})),{},{logout:function(){this.revokeAuthentication(),this.$router.push("/login")},handleShowModalClick:function(){this.showModal=!0,this.$emit("show-modal")},getCurrentUser:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var s,a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u["a"].getCurrentUser();case 3:if(s=e.sent,a=s.data,r=s.statusText,"OK"===r){e.next=7;break}throw new Error(r);case 7:t.currentUserId=a.id,e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))()}})},v=p,h=(s("fbe6"),s("2877")),m=Object(h["a"])(v,a,r,!1,null,"106eb749",null);e["a"]=m.exports},e291:function(t,e,s){"use strict";s("3a08")},fbe6:function(t,e,s){"use strict";s("133c")}}]);
//# sourceMappingURL=chunk-6acd775c.8ae746b3.js.map