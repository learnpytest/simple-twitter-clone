(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1881896c"],{"21ab":function(e,t,a){"use strict";a("c8dd")},"247f":function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"comment-wrapper"},e._l(e.tweets,(function(t){return a("div",{key:t.ReplyID,staticClass:"comment"},[a("div",{staticClass:"user-pic",on:{click:function(a){return a.stopPropagation(),a.preventDefault(),function(){return e.$router.push({name:"user",params:{id:t.User.id}})}.apply(null,arguments)}}},[a("img",{attrs:{src:e._f("emptyImage")(t.User&&t.User.avatar),alt:""}})]),a("div",{staticClass:"tweet-info"},[a("div",{staticClass:"info"},[a("p",{staticClass:"user-name"},[e._v(" "+e._s(t.User&&t.User.name)+" "),a("span",{staticClass:"user-id"},[e._v("@"+e._s(t.User&&t.User.account)+" • ")]),a("span",{staticClass:"time"},[e._v(e._s(e._f("fromNow")(t&&t.createdAt)))])])]),a("p",{attrs:{Class:"reply-to"}},[e._v(" 回覆 "),a("span",[e._v("@ "+e._s(t.Tweet&&t.Tweet.User.account||e.parentTweet.User&&e.parentTweet.User.name))])]),a("div",{staticClass:"tweet-text"},[e._v(" "+e._s(t&&t.comment)+" ")])])])})),0)},n=[],i=a("2909"),r=(a("99af"),a("ac0d")),o={name:"Comments",props:{initialTweets:{type:Array,required:!0},parentTweet:{type:Object}},data:function(){return{showReplyModal:!1,tweets:[]}},watch:{initialTweets:function(e){this.tweets=[].concat(Object(i["a"])(this.tweets),Object(i["a"])(e))}},methods:{fetchData:function(){this.tweets=this.initialTweets}},created:function(){this.fetchData()},mixins:[r["a"],r["d"]]},c=o,l=(a("21ab"),a("2877")),u=Object(l["a"])(c,s,n,!1,null,"0f2160b3",null);t["a"]=u.exports},"4ad7":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAACTSURBVHgB7dZBCsJAEETRwhN4w9TN5wjxBppBF6IGlQnp7vAfFGQVqmdVEgAAOJZpybykPb5L6YWvT5lVyGv5nqYiPpXvsQqgfBTKR6F8FMpHWSu/V5oGN1WTQor/tKlO+u6seBcNsOJf3xrklZ9PKsTiiBwsjsjB4ogcLI7Iwfpjw2RlvS/Jcqx78U02DAAAyOwG2DPi+W+Y9VUAAAAASUVORK5CYII="},"56c3":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[e.showModal?a("div",{staticClass:"new-tweet-modal"},[a("NewTweetModal",{attrs:{initialShowModal:e.showModal},on:{"show-modal":e.modalToggle}})],1):e._e(),e.showReplyModal?a("div",{staticClass:"new-tweet-modal"},[a("ReplyTweetModal",{attrs:{initialShowReplyModal:e.showReplyModal,initialTweetId:e.replyTweetId},on:{"show-reply-modal":e.replyModalToggle}})],1):e._e(),a("div",{staticClass:"reply-modal"}),a("div",{staticClass:"reply-list"},[a("div",{staticClass:"sidebar"},[a("Sidebar",{attrs:{initialShowModal:e.showModal},on:{"show-modal":e.modalToggle}})],1),a("div",{staticClass:"main"},[a("div",{staticClass:"tweet-detail"},[a("TweetDetail",{attrs:{initialTweet:e.tweet},on:{"show-reply-modal":e.replyModalToggle}})],1),a("div",{staticClass:"tweets"},[a("Comments",{attrs:{initialTweets:e.initialTweetReplies,parentTweet:e.tweet}})],1)]),a("div",{staticClass:"popular"},[a("Popular")],1)])])},n=[],i=a("2909"),r=a("5530"),o=a("1da1"),c=(a("96cf"),a("9a31")),l=a("c4cd"),u=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"tweet-detail-wrapper"},[s("div",{staticClass:"header"},[s("img",{attrs:{src:a("4ad7"),alt:""},on:{click:function(t){return e.$router.back()}}}),s("p",[e._v("推文")])]),s("div",{staticClass:"tweet-detail-box"},[s("div",{staticClass:"tweet-detail-box_user-info"},[s("img",{staticClass:"user-pic",attrs:{src:e._f("emptyImage")(e.tweet.User&&e.tweet.User.avatar),alt:""}}),s("div",{staticClass:"nameId"},[s("p",[e._v(e._s(e.tweet.User&&e.tweet.User.name))]),s("p",[e._v("@"+e._s(e.tweet.User&&e.tweet.User.account))])])]),s("div",{staticClass:"tweet-detail-box_text"},[s("p",[e._v(" "+e._s(e.tweet&&e.tweet.description)+" ")]),s("p",{staticClass:"tweet-detail-box_created-detail"},[e._v("上午 10:05・2020年6月10日")])]),s("div",{staticClass:"tweet-detail-box_numbers"},[s("p",[e._v(e._s(e.tweet&&e.tweet.RepliesCount)),s("span",[e._v("回覆")])]),s("p",[e._v(e._s(e.tweet&&e.tweet.LikesCount)),s("span",[e._v("喜歡次數")])])]),s("div",{staticClass:"tweet-detail-box_btn-control"},[s("img",{staticClass:"hoverStyle",attrs:{src:a("5482"),alt:""},on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.handleShowModalClick(e.tweet.TweetId)}}}),e.tweet.isLiked?s("img",{staticClass:"hoverStyle",attrs:{id:"liked-btn",src:a("c92c"),alt:""},on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.unLike(e.tweet.TweetId,e.tweet)}}}):s("img",{staticClass:"hoverStyle",attrs:{src:a("5ead"),alt:""},on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.addLike(e.tweet.TweetId,e.tweet)}}})])])])},w=[],d=(a("a4d3"),a("e01a"),a("5fad")),p=a("60e2"),h=a("ac0d"),f={props:{initialTweet:{type:Object,require:!0}},mixins:[h["a"],h["e"]],data:function(){return{showReplyModal:!1,tweet:{},tweetReplies:[],currentUser:{}}},created:function(){this.fetchCurrentUser()},methods:{fetchCurrentUser:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,d["a"].getCurrentUser();case 2:a=t.sent,s=a.data,e.currentUser=Object(r["a"])({},s);case 5:case"end":return t.stop()}}),t)})))()},addLike:function(e,t){var a=this;return Object(o["a"])(regeneratorRuntime.mark((function s(){var n,i;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.prev=0,s.next=3,p["a"].postLike(e);case 3:if(n=s.sent,i=n.data,"success"===i.status){s.next=7;break}throw new Error(i.message);case 7:a.tweet=Object(r["a"])(Object(r["a"])({},a.tweet),{},{isLiked:!0,LikesCount:a.tweet.LikesCount+1}),a.socketSendCommunityOneNotification("1",a.currentUser,null,t.description,t.TweetId),s.next=14;break;case 11:s.prev=11,s.t0=s["catch"](0),console.log("error",s.t0);case 14:case"end":return s.stop()}}),s,null,[[0,11]])})))()},unLike:function(e,t){var a=this;return Object(o["a"])(regeneratorRuntime.mark((function s(){var n,i;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.prev=0,s.next=3,p["a"].deleteLike(e);case 3:if(n=s.sent,i=n.data,"success"===i.status){s.next=7;break}throw new Error(i.message);case 7:a.tweet=Object(r["a"])(Object(r["a"])({},a.tweet),{},{isLiked:!1,LikesCount:a.tweet.LikesCount-1}),a.socketSendCommunityOneNotification("2",a.currentUser,null,t.description,t.TweetId),s.next=14;break;case 11:s.prev=11,s.t0=s["catch"](0),console.log("error",s.t0);case 14:case"end":return s.stop()}}),s,null,[[0,11]])})))()},fetchData:function(){this.tweet=Object(r["a"])({},this.initialTweet)},handleShowModalClick:function(e){this.$emit("show-reply-modal",e)}},watch:{initialTweet:function(){this.fetchData()}}},v=f,m=(a("ada4"),a("2877")),A=Object(m["a"])(v,u,w,!1,null,"47ed7bd8",null),C=A.exports,b=a("8624"),T=a("6783"),g=a("0162"),k=a("247f"),_={components:{Popular:c["a"],Sidebar:l["a"],TweetDetail:C,NewTweetModal:b["a"],ReplyTweetModal:g["a"],Comments:k["a"]},data:function(){return{showModal:!1,showReplyModal:!1,tweet:{},initialTweetReplies:[]}},created:function(){var e=this.$route.params.id;this.fetchTweet(e),this.fetchTweetReplies(e)},methods:{fetchTweet:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var s,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,T["a"].getTweet(e);case 3:s=a.sent,n=s.data,t.tweet=Object(r["a"])({},n),a.next=11;break;case 8:a.prev=8,a.t0=a["catch"](0),console.log("error",a.t0);case 11:case"end":return a.stop()}}),a,null,[[0,8]])})))()},fetchTweetReplies:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var s,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,T["a"].getTweetReplies(e);case 3:s=a.sent,n=s.data,t.initialTweetReplies=Object(i["a"])(n),a.next=11;break;case 8:a.prev=8,a.t0=a["catch"](0),console.log("error",a.t0);case 11:case"end":return a.stop()}}),a,null,[[0,8]])})))()},modalToggle:function(){this.showModal?this.showModal=!1:this.showModal=!0},replyModalToggle:function(e){this.showReplyModal?(this.replyTweetId="",this.showReplyModal=!1):(this.replyTweetId=e,this.showReplyModal=!0)}}},y=_,R=(a("bbbe"),Object(m["a"])(y,s,n,!1,null,"938fae36",null));t["default"]=R.exports},"808e":function(e,t,a){},"944c":function(e,t,a){},ada4:function(e,t,a){"use strict";a("944c")},bbbe:function(e,t,a){"use strict";a("808e")},c8dd:function(e,t,a){}}]);
//# sourceMappingURL=chunk-1881896c.5d2f49fa.js.map