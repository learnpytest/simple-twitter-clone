(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-fc0f7a3c"],{"0162":function(t,e,r){"use strict";var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("form",{staticClass:"new-tweet-modal",on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.handleCommentSubmit(t.tweet.TweetId,t.tweet)}}},[s("div",{staticClass:"new-text-box"},[s("div",{staticClass:"close-btn"},[s("button",[s("img",{attrs:{src:r("214b"),alt:""},on:{click:t.handleShowModalClick}})])]),s("div",{staticClass:"to-reply-user"},[s("div",{staticClass:"to-reply-user_pic"},[s("img",{staticClass:"user-pic",attrs:{src:t._f("emptyImage")(t.tweet.User&&t.tweet.User.avatar),alt:""}}),s("div",{staticClass:"connecting-line"})]),s("div",{staticClass:"to-reply-user-info"},[s("div",{staticClass:"to-reply-user-info_info"},[s("p",{staticClass:"to-reply-user-name"},[t._v(" "+t._s(t.tweet.User&&t.tweet.User.name)+" "),s("span",[t._v("@"+t._s(t.tweet.User&&t.tweet.User.account)+" • ")]),s("span",[t._v(t._s(t._f("fromNow")(t.tweet&&t.tweet.createdAt)))])])]),s("div",{staticClass:"to-reply-user-tweet_text"},[t._v(" "+t._s(t.tweet&&t.tweet.description)+" ")]),s("p",{staticClass:"reply-to"},[t._v(" 回覆給 "),s("span",[t._v("@"+t._s(t.tweet.User&&t.tweet.User.account))])])])]),s("div",{staticClass:"text-box"},[s("div",{staticClass:"user-info"},[s("img",{staticClass:"user-pic",attrs:{src:t._f("emptyImage")(t.currentUser&&t.currentUser.avatar),alt:""}})]),s("div",{staticClass:"text-area"},[s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.text,expression:"text"}],staticClass:"form-control",attrs:{rows:"3",maxlength:"141",placeholder:"推你的回覆"},domProps:{value:t.text},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.resetEmpty.apply(null,arguments)},input:function(e){e.target.composing||(t.text=e.target.value)}}}),s("span",{staticClass:"limiter"},[t._v(t._s(t.charactersLeft))])])]),s("div",{staticClass:"tweet-btn"},[t.text.length>=140?s("p",{staticClass:"error-txt"},[t._v("字數不可超過 140 字")]):t._e(),t.submitEmptyField?s("p",{staticClass:"error-txt"},[t._v("內容不可空白")]):t._e(),s("button",{staticClass:"save-btn",attrs:{type:"submit",disabled:t.isProcessing}},[t._v(" "+t._s(t.isProcessing?"發送中...":"推文")+" ")])])])])},a=[],n=r("5530"),i=r("1da1"),c=(r("96cf"),r("a9e3"),r("2ca0"),r("5fad")),o=r("6783"),u=r("2f62"),l=r("6ad5"),p=r("ac0d"),d={name:"ReplyTweetModal",mixins:[p["a"],p["d"],p["e"]],props:{initialShowReplyModal:{type:Boolean,required:!0},initialTweetId:{type:Number,require:!0}},data:function(){return{showReplyModal:!1,text:"",tweetId:"",tweet:{},submitEmptyField:!1,currentUser:{}}},created:function(){this.fetchData(),this.getCurrentUser()},methods:{fetchData:function(){this.showReplyModal=this.initialShowReplyModal,this.tweetId=this.initialTweetId,this.fetchTweet(this.tweetId)},fetchTweet:function(t){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){var s,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,o["a"].getTweet(t);case 3:s=r.sent,a=s.data,e.tweet=Object(n["a"])({},a),r.next=11;break;case 8:r.prev=8,r.t0=r["catch"](0),console.log("error",r.t0);case 11:case"end":return r.stop()}}),r,null,[[0,8]])})))()},handleCommentSubmit:function(t,e){var r=this;return Object(i["a"])(regeneratorRuntime.mark((function s(){var a,n;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(r.text.length){s.next=3;break}return r.submitEmptyField=!0,s.abrupt("return");case 3:if(!(r.text.length>140)){s.next=5;break}return s.abrupt("return");case 5:return s.prev=5,s.next=8,o["a"].replyTweet({tweetId:r.tweetId,comment:r.text});case 8:if(a=s.sent,n=a.data,"success"===n.status){s.next=12;break}throw new Error(n.message);case 12:if(r.handleShowModalClick(),!r.$route.path.startsWith("/reply")){s.next=16;break}return r.$router.push("/usermain"),s.abrupt("return");case 16:r.socketSendCommunityOneNotification("6",r.currentUser,e.User,r.text,e.TweetId),r.$router.push("/reply/".concat(t)),s.next=23;break;case 20:s.prev=20,s.t0=s["catch"](5),console.log(s.t0);case 23:case"end":return s.stop()}}),s,null,[[5,20]])})))()},getCurrentUser:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var r,s,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c["a"].getCurrentUser();case 3:if(r=e.sent,s=r.data,a=r.statusText,"OK"===a){e.next=7;break}throw new Error(a);case 7:t.currentUser=s,e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))()},handleShowModalClick:function(){this.showReplyModal=!1,this.$emit("show-reply-modal")},resetEmpty:function(){this.submitEmptyField=!1}},computed:Object(n["a"])({charactersLeft:function(){var t=this.text.length,e=140;return e-t+" / "+e+"剩餘字數"}},Object(u["c"])({isProcessing:l["u"]}))},f=d,h=(r("66e5"),r("2877")),m=Object(h["a"])(f,s,a,!1,null,"27f460ce",null);e["a"]=m.exports},"2ca0":function(t,e,r){"use strict";var s=r("23e7"),a=r("e330"),n=r("06cf").f,i=r("50c4"),c=r("577e"),o=r("5a34"),u=r("1d80"),l=r("ab13"),p=r("c430"),d=a("".startsWith),f=a("".slice),h=Math.min,m=l("startsWith"),v=!p&&!m&&!!function(){var t=n(String.prototype,"startsWith");return t&&!t.writable}();s({target:"String",proto:!0,forced:!v&&!m},{startsWith:function(t){var e=c(u(this));o(t);var r=i(h(arguments.length>1?arguments[1]:void 0,e.length)),s=c(t);return d?d(e,s,r):f(e,r,r+s.length)===s}})},"408a":function(t,e,r){var s=r("e330");t.exports=s(1..valueOf)},5482:function(t,e,r){t.exports=r.p+"img/icon_reply.3d73bb6d.svg"},"5ead":function(t,e,r){t.exports=r.p+"img/icon_like.1702499b.svg"},"60e2":function(t,e,r){"use strict";var s=r("ad2d");e["a"]={getLikes:function(t){return s["a"].get("/users/".concat(t,"/likes"))},postLike:function(t){return s["a"].post("/tweets/".concat(t,"/like"))},deleteLike:function(t){return s["a"].post("/tweets/".concat(t,"/unlike"))}}},"66e5":function(t,e,r){"use strict";r("b84e")},"95ef":function(t,e,r){"use strict";r("b74c")},"9a31":function(t,e,r){"use strict";var s=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"popular-wrapper"},[r("div",{staticClass:"popular-header"},[t._v("Popular")]),t._l(t.getTopUsers,(function(e){return r("div",{key:e.UserId,staticClass:"popular-card"},[r("img",{staticClass:"hoverStyle",attrs:{src:t._f("emptyImage")(e.avatar),alt:"user avatar"},on:{click:function(r){return r.stopPropagation(),r.preventDefault(),t.redirectToUser(e.UserId)}}}),r("div",{staticClass:"popular-card_info"},[r("p",{staticClass:"user-name"},[t._v(t._s(e.name))]),r("p",{staticClass:"user-info"},[t._v("@"+t._s(e.account))])]),e.isFollowed?r("div",{staticClass:"follow-btn"},[r("button",{staticClass:"following-btn",class:{disabled:t.currentUserId===e.UserId},attrs:{disabled:t.currentUserId===e.UserId},on:{click:function(r){return r.stopPropagation(),r.preventDefault(),t.cancel(e.UserId,e)}}},[t._v(" 正在跟隨 ")])]):r("div",{staticClass:"follow-btn"},[r("button",{staticClass:"follower-btn",class:{disabled:t.currentUserId===e.UserId},attrs:{disabled:t.currentUserId===e.UserId},on:{click:function(r){return r.stopPropagation(),r.preventDefault(),t.post(e.UserId,e)}}},[t._v(" 跟隨 ")])])])}))],2)},a=[],n=r("1da1"),i=r("5530"),c=(r("96cf"),r("2f62")),o=r("ac0d"),u=r("5fad"),l=r("6ad5"),p={name:"Popular",mixins:[o["a"],o["e"]],data:function(){return{currentUserId:"",currentUser:{}}},created:function(){this.setTopUsers(),this.getCurrentUser()},methods:Object(i["a"])(Object(i["a"])({cancel:function(t,e){var r=this.$route.params.id;this.cancelFollow({followingId:t,userId:r}),this.$emit("updateCancelView",t),this.socketSendCommunityOneNotification("4",this.currentUser,e)},post:function(t,e){var r=this.$route.params.id;this.postFollowship({followingId:t,userId:r}),this.$emit("updateFollowView",t),this.socketSendCommunityOneNotification("3",this.currentUser,e)}},Object(c["b"])({setTopUsers:l["ib"],postFollowship:l["J"],cancelFollow:l["h"]})),{},{getCurrentUser:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){var r,s,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u["a"].getCurrentUser();case 3:if(r=e.sent,s=r.data,a=r.statusText,"OK"===a){e.next=7;break}throw new Error(a);case 7:t.currentUser=Object(i["a"])({},s),t.currentUserId=s.id,e.next=14;break;case 11:e.prev=11,e.t0=e["catch"](0),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})))()},redirectToUser:function(t){this.$router.push({name:"user",params:{id:t}})}}),computed:Object(i["a"])({},Object(c["c"])({getTopUsers:l["C"]}))},d=p,f=(r("95ef"),r("2877")),h=Object(f["a"])(d,s,a,!1,null,"4b1169b2",null);e["a"]=h.exports},a9e3:function(t,e,r){"use strict";var s=r("83ab"),a=r("da84"),n=r("e330"),i=r("94ca"),c=r("6eeb"),o=r("1a2d"),u=r("7156"),l=r("3a9b"),p=r("d9b5"),d=r("c04e"),f=r("d039"),h=r("241c").f,m=r("06cf").f,v=r("9bf2").f,w=r("408a"),b=r("58a8").trim,g="Number",x=a[g],C=x.prototype,_=a.TypeError,I=n("".slice),U=n("".charCodeAt),y=function(t){var e=d(t,"number");return"bigint"==typeof e?e:k(e)},k=function(t){var e,r,s,a,n,i,c,o,u=d(t,"number");if(p(u))throw _("Cannot convert a Symbol value to a number");if("string"==typeof u&&u.length>2)if(u=b(u),e=U(u,0),43===e||45===e){if(r=U(u,2),88===r||120===r)return NaN}else if(48===e){switch(U(u,1)){case 66:case 98:s=2,a=49;break;case 79:case 111:s=8,a=55;break;default:return+u}for(n=I(u,2),i=n.length,c=0;c<i;c++)if(o=U(n,c),o<48||o>a)return NaN;return parseInt(n,s)}return+u};if(i(g,!x(" 0o1")||!x("0b1")||x("+0x1"))){for(var N,E=function(t){var e=arguments.length<1?0:x(y(t)),r=this;return l(C,r)&&f((function(){w(r)}))?u(Object(e),r,E):e},O=s?h(x):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),T=0;O.length>T;T++)o(x,N=O[T])&&!o(E,N)&&v(E,N,m(x,N));E.prototype=C,C.constructor=E,c(a,g,E)}},b74c:function(t,e,r){},b84e:function(t,e,r){},c92c:function(t,e,r){t.exports=r.p+"img/icon_like_fill.7e3617b7.svg"}}]);
//# sourceMappingURL=chunk-fc0f7a3c.6c0477df.js.map